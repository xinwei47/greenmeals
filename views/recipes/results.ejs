<% layout('layouts/boilerplate') %>

<div class="search__results">
    <% searchResults.forEach((result, ind) => { %>




    <div class="card">
        <!-- insert fav icon as a checkbox -->
        <form action="/account/favorites/?recipeId=<%= result.id %>&image=<%= result.image %>&title=<%= result.title %>"
            class="fav" method="POST">

            <!-- check if the result is in the favorite recipe database -->
            <% if(favRecipesIdArr.includes(result.id)) { %>
            <input type="checkbox" name="fav" id="fav-toggle-<%= ind %>" class="fav-toggle"
                onchange="this.form.submit()" checked>

            <% } else { %>
            <input type="checkbox" name="fav" id="fav-toggle-<%= ind %>" class="fav-toggle"
                onchange="this.form.submit()">
            <% } %>

            <label for="fav-toggle-<%= ind %>">
                <div class="fav__btn"><i class="fav__icon fas fa-heart"></i></div>
            </label>
        </form>

        <!-- card content -->
        <a href="/recipes/<%= result.id %>" class="card__link">
            <div class="card__img-container">
                <img src=<%= result.image %> alt="" class="card__img">
            </div>
            <div class="card__content">
                <h3 class="card__title heading--3"><%= result.title %></h3>
                <ul class="card__nutrition-overview">
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[0].name %>:
                        <%= result.nutrition.nutrients[0].amount %>
                        <%= result.nutrition.nutrients[0].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[1].name %>:
                        <%= result.nutrition.nutrients[1].amount %>
                        <%= result.nutrition.nutrients[1].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[3].name %>:
                        <%= result.nutrition.nutrients[3].amount %>
                        <%= result.nutrition.nutrients[3].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[8].name %>:
                        <%= result.nutrition.nutrients[8].amount %>
                        <%= result.nutrition.nutrients[8].unit %>
                    </li>

                </ul>
            </div>
        </a>
    </div>

    <% }) %>

</div>