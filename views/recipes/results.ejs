<% layout('layouts/boilerplate') %>
<div class="search__results">
    <% searchResults.forEach((result, ind) => { %>

    <div class="card">
        <!-- insert fav icon as a checkbox -->
        <!-- check if the result is in the favorite recipe database -->
        <div class="card__fav-box">
            <% if(currentUser) { %>
            <% if(favRecipesIdArr.find(arr => arr.includes(result.id))) { %>
            <%- include('../partials/unfavform', {id: favRecipesIdArr.find(arr => arr.includes(result.id))[1], ind}) %>
            <% } else { %>
            <%- include('../partials/favform', {recipe: result, ind}) %>
            <% } %>
            <% } %>
        </div>
        <!-- fav icon ends -->

        <!-- card content -->
        <a href="/recipes/<%= result.id %>" class="card__link">
            <div class="card__img-container">
                <img src=<%= result.image %> alt="" class="card__img">
            </div>
            <div class="card__content">
                <h3 class="card__title heading--3"><%= result.title %></h3>
                <ul class="card__nutrition-overview">
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[0].name %>:
                        <%= result.nutrition.nutrients[0].amount %>
                        <%= result.nutrition.nutrients[0].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[1].name %>:
                        <%= result.nutrition.nutrients[1].amount %>
                        <%= result.nutrition.nutrients[1].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[3].name %>:
                        <%= result.nutrition.nutrients[3].amount %>
                        <%= result.nutrition.nutrients[3].unit %>
                    </li>
                    <li class="card__nutrition-item"><%= result.nutrition.nutrients[8].name %>:
                        <%= result.nutrition.nutrients[8].amount %>
                        <%= result.nutrition.nutrients[8].unit %>
                    </li>
                </ul>
            </div>
        </a>
    </div>

    <% }) %>

</div>